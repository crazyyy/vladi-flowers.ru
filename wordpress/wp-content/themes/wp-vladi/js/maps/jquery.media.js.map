{"version":3,"sources":["jquery.media.js"],"names":["$","isFirefoxWMPPluginInstalled","plugs","navigator","plugins","i","length","plugin","getTypesRegExp","types","player","fn","media","defaults","players","RegExp","replace","getGenerator","el","options","generate","isDigit","c","indexOf","getSettings","$el","cls","className","meta","metadata","data","w","width","parseInt","match","h","height","a","b","preferMeta","p","params","bgColor","opts","extend","each","o","caption","text","src","attr","css","browser","msie","key","attrs","push","oAttrs","oUrl","document","createElement","join","appendChild","eAttrs","id","$div","after","remove","append","html","appendTo","f1","f2","this","r","m","exec","toLowerCase","type","shift","num","autoplayAttr","autoplay","name","mediabox","click","blockUI","version","warning","alert","div","$e","clone","hide","margin","origEl","newEl","safari","loadingImage","backgroundImage","backgroundPosition","backgroundRepeat","boxTitle","prepend","displayBox","Stop","e","DoStop","controls","stop","mapFormat","format","flashvars","flashVersion","flvPlayer","mp3Player","silverlight","inplaceInstallPrompt","isWindowless","framerate","onError","onLoad","initParams","userContext","flash","classid","codebase","pluginspage","quicktime","realplayer","winmedia","mozilla","iframe","counter","split","swf","SWFObject","f","so","addParam","addVariable","write","flv","mp3","test","liveurl","file","xaml","window","Sys","Silverlight","props","background","events","id1","id2","createObjectEx","source","parentElement","properties","jQuery"],"mappings":"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","file":"jquery.media.js","sourcesContent":["/*\r\n * jQuery Media Plugin for converting elements into rich media content.\r\n *\r\n * Examples and documentation at: http://malsup.com/jquery/media/\r\n * Copyright (c) 2007 M. Alsup\r\n * Dual licensed under the MIT and GPL licenses:\r\n * http://www.opensource.org/licenses/mit-license.php\r\n * http://www.gnu.org/licenses/gpl.html\r\n *\r\n * @author: M. Alsup\r\n * @version: 0.73 (12/04/2007)\r\n * @requires jQuery v1.1.2 or later\r\n * $Id: jquery.media.js 2460 2007-07-23 02:53:15Z malsup $\r\n *\r\n * Supported Media Players:\r\n *    - Flash\r\n *    - Quicktime\r\n *    - Real Player\r\n *    - Silverlight\r\n *    - Windows Media Player\r\n *    - iframe\r\n *\r\n * Supported Media Formats:\r\n *   Any types supported by the above players, such as:\r\n *     Video: asf, avi, flv, mov, mpg, mpeg, mp4, qt, smil, swf, wmv, 3g2, 3gp\r\n *     Audio: aif, aac, au, gsm, mid, midi, mov, mp3, m4a, snd, rm, wav, wma\r\n *     Other: bmp, html, pdf, psd, qif, qtif, qti, tif, tiff, xaml\r\n *\r\n * Thanks to Mark Hicken and Brent Pedersen for helping me debug this on the Mac!\r\n *\r\n * change work ext file + mediaplayer path change\r\n */\r\n(function($) {\r\n\r\n/**\r\n * Chainable method for converting elements into rich media.\r\n *\r\n * @name media\r\n * @param Object options Options object\r\n * @param Function callback fn invoked for each matched element before conversion\r\n * @param Function callback fn invoked for each matched element after conversion\r\n * @cat Plugins/media\r\n */\r\n$.fn.media = function(options, f1, f2) {\r\n    return this.each(function() {\r\n        \r\n        if (typeof options == 'function') {\r\n            f2 = f1;\r\n            f1 = options;\r\n            options = {};\r\n        }\r\n        var o = getSettings(this, options);\r\n        // pre-conversion callback, passes original element and fully populated options\r\n        if (typeof f1 == 'function') f1(this, o);\r\n        \r\n        var r = getTypesRegExp();\r\n        var m = r.exec(o.src.toLowerCase()) || [''];\r\n        o.type ? m[0] = o.type : m.shift();\r\n        for (var i=0; i < m.length; i++) {\r\n            fn = m[i].toLowerCase();\r\n            \r\n            if (isDigit(fn[0])) fn = 'fn' + fn; // fns can't begin with numbers\r\n            if (!$.fn.media[fn]) \r\n                continue;  // unrecognized media type\r\n            // normalize autoplay settings\r\n            var player = $.fn.media[fn+'_player'];\r\n            if (!o.params) o.params = {};\r\n            if (player) {\r\n                var num = player.autoplayAttr == 'autostart';\r\n                o.params[player.autoplayAttr || 'autoplay'] = num ? (o.autoplay ? 1 : 0) : o.autoplay ? true : false;\r\n            }\r\n            var $div = $.fn.media[fn](this, o);\r\n\r\n            $div.css('backgroundColor', o.bgColor).width(o.width);\r\n            \r\n            // post-conversion callback, passes original element, new div element and fully populated options\r\n            if (typeof f2 == 'function') f2(this, $div[0], o, player.name);\r\n            break;\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * Chainable method for preparing elements to display rich media with\r\n * a page overlay.\r\n *\r\n * @name mediabox\r\n * @param Object options Options object\r\n * @param Object css values for the media div\r\n * @cat Plugins/media\r\n */\r\n$.fn.mediabox = function(options, css) {\r\n    return this.click(function() {\r\n        if (typeof $.blockUI == 'undefined' || typeof $.blockUI.version == 'undefined' || $.blockUI.version < 1.26) {\r\n            if (typeof $.fn.mediabox.warning != 'undefined') return this; // one warning is enough\r\n            $.fn.mediabox.warning = 1;\r\n            alert('The mediabox method requires blockUI v1.26 or later.');\r\n            return false;\r\n        }\r\n        var o, p, div=0, $e = $(this).clone();\r\n        $e.appendTo('body').hide().css({margin: 0});\r\n        options = $.extend({}, options, { autoplay: 1 }); // force autoplay in box mode\r\n        $e.media(options, function(){}, function(origEl, newEl, opts, player) {\r\n            div = newEl;\r\n            o = opts;\r\n            p = player;\r\n        });\r\n        if (!div) return false;\r\n        // don't pull element from the dom on Safari\r\n        var $div = $.browser.safari ? $(div).hide() : $(div).remove();\r\n\r\n        if (o.loadingImage)\r\n            $div.css({\r\n                backgroundImage:    'url('+o.loadingImage+')',\r\n                backgroundPosition: 'center center',\r\n                backgroundRepeat:   'no-repeat'\r\n            });\r\n        if (o.boxTitle)\r\n            $div.prepend('<div style=\"margin:0;padding:0\">' + o.boxTitle + '</div>');\r\n        \r\n        if (css) $div.css(css);\r\n\r\n        $div.displayBox( { width: o.width, height: o.height }, function(el) {\r\n            // quirkiness; sometimes media doesn't stop when removed from the DOM (especially in IE)\r\n            $('object,embed', el).each(function() {\r\n                try { this.Stop();   } catch(e) {}  // quicktime\r\n                try { this.DoStop(); } catch(e) {}  // real\r\n                try { this.controls.stop(); } catch(e) {} // windows media player\r\n                $(this).remove();\r\n            });\r\n        }, p == 'flash'); // <-- mac/ff workaround\r\n        return false;\r\n    });\r\n};\r\n\r\n  \r\n/**\r\n * Non-chainable method for adding or changing file format / player mapping\r\n * @name mapFormat\r\n * @param String format File format extension (ie: mov, wav, mp3)\r\n * @param String player Player name to use for the format (one of: flash, quicktime, realplayer, winmedia, silverlight or iframe\r\n */\r\n$.fn.media.mapFormat = function(format, player) {\r\n    if (!format || !player || !$.fn.media.defaults.players[player]) return; // invalid\r\n    format = format.toLowerCase();\r\n    if (isDigit(format[0])) format = 'fn' + format;\r\n    $.fn.media[format] = $.fn.media[player];\r\n    $.fn.media[format+'_player'] = $.fn.media.defaults.players[player];\r\n};\r\n\r\n// global defautls; override as needed\r\n$.fn.media.defaults = {\r\n    width:         400,\r\n    height:        400,\r\n    preferMeta:    1,         // true if markup metadata takes precedence over options object\r\n    autoplay:      0,         // normalized cross-player setting\r\n    bgColor:       '#ffffff', // background color\r\n    params:        {},        // added to object element as param elements; added to embed element as attrs\r\n    attrs:         {},        // added to object and embed elements as attrs\r\n    flashvars:     {},        // added to flash content as flashvars param/attr\r\n    flashVersion:  '7',       // required flash version\r\n    \r\n    // MediaBox options\r\n    boxTitle:      null,      // MediaBox titlebar\r\n    loadingImage:  null,      // MediaBox loading indicator\r\n    \r\n    // default flash video and mp3 player (@see: http://jeroenwijering.com/?item=Flash_Media_Player)\r\n    flvPlayer:     'mediaplayer.swf',\r\n    mp3Player:     'mediaplayer.swf',\r\n    \r\n    // @see http://msdn2.microsoft.com/en-us/library/bb412401.aspx\r\n    silverlight: {\r\n        inplaceInstallPrompt: 'true', // display in-place install prompt?\r\n        isWindowless:         'true', // windowless mode (false for wrapping markup)\r\n        framerate:            '24',   // maximum framerate\r\n        version:              '0.9',  // Silverlight version\r\n        onError:              null,   // onError callback\r\n        onLoad:               null,   // onLoad callback\r\n        initParams:           null,   // object init params\r\n        userContext:          null    // callback arg passed to the load callback\r\n    }\r\n};\r\n\r\n// Media Players; think twice before overriding\r\n$.fn.media.defaults.players = {\r\n    flash: {\r\n        name:         'flash',\r\n        types:        'flv,mp3,swf',\r\n        oAttrs:   {\r\n            classid:  'clsid:d27cdb6e-ae6d-11cf-96b8-444553540000',\r\n            type:     'application/x-oleobject',\r\n            codebase: 'http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=' + $.fn.media.defaults.flashVersion\r\n        },\r\n        eAttrs: {\r\n            type:         'application/x-shockwave-flash',\r\n            pluginspage:  'http://www.adobe.com/go/getflashplayer'\r\n        }        \r\n    },\r\n    quicktime: {\r\n        name:         'quicktime',\r\n        types:        'aif,aiff,aac,au,bmp,gsm,mov,mid,midi,mpg,mpeg,mp4,m4a,psd,qt,qtif,qif,qti,snd,tif,tiff,wav,3g2,3gp',\r\n        oAttrs:   {\r\n            classid:  'clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B',\r\n            codebase: 'http://www.apple.com/qtactivex/qtplugin.cab'\r\n        },\r\n        eAttrs: {\r\n            pluginspage:  'http://www.apple.com/quicktime/download/'\r\n        }\r\n    },\r\n    realplayer: {\r\n        name:         'real',\r\n        types:        'ra,ram,rm,rpm,rv,smi,smil',\r\n        autoplayAttr: 'autostart',\r\n        oAttrs:   {\r\n            classid:  'clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA'\r\n        },\r\n        eAttrs: {\r\n            type:         'audio/x-pn-realaudio-plugin',\r\n            pluginspage:  'http://www.real.com/player/'\r\n        }\r\n    },\r\n    winmedia: {\r\n        name:         'winmedia',\r\n        types:        'asf,avi,wma,wmv',\r\n        autoplayAttr: 'autostart',\r\n        oUrl:         'url',\r\n        oAttrs:   {\r\n            classid:  'clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6',\r\n            type:     'application/x-oleobject'\r\n        },\r\n        eAttrs: {\r\n            type:         $.browser.mozilla && isFirefoxWMPPluginInstalled() ? 'application/x-ms-wmp' : 'application/x-mplayer2',\r\n            pluginspage:  'http://www.microsoft.com/Windows/MediaPlayer/'\r\n        }        \r\n    },\r\n    // special cases\r\n    iframe: {\r\n        name:  'iframe',\r\n        types: 'html,pdf'\r\n    },\r\n    silverlight: {\r\n        name:  'silverlight',\r\n        types: 'xaml'\r\n    }\r\n};\r\n\r\n//\r\n//  everything below here is private\r\n//\r\n\r\n\r\n// detection script for FF WMP plugin (http://www.therossman.org/experiments/wmp_play.html)\r\n// (hat tip to Mark Ross for this script)\r\nfunction isFirefoxWMPPluginInstalled() {\r\n    var plugs = navigator.plugins;\r\n    for (i = 0; i < plugs.length; i++) {\r\n        var plugin = plugs[i];\r\n        if (plugin['filename'] == 'np-mswmp.dll')\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nvar counter = 1;\r\n\r\nfor (var player in $.fn.media.defaults.players) {\r\n    var types = $.fn.media.defaults.players[player].types;\r\n    $.each(types.split(','), function(i,o) {\r\n        if (isDigit(o[0])) o = 'fn' + o;\r\n        $.fn.media[o] = $.fn.media[player] = getGenerator(player);\r\n        $.fn.media[o+'_player'] = $.fn.media.defaults.players[player];\r\n    });\r\n};\r\n\r\nfunction getTypesRegExp() {\r\n    var types = '';\r\n    for (var player in $.fn.media.defaults.players) {\r\n        if (types.length) types += ',';\r\n        types += $.fn.media.defaults.players[player].types;\r\n    };    \r\n    return new RegExp('\\\\.(' + types.replace(/,/ig,'|') + ')\\\\b');\r\n};\r\n\r\nfunction getGenerator(player) {\r\n    return function(el, options) {\r\n        return generate(el, options, player);\r\n    };\r\n};\r\n\r\nfunction isDigit(c) {\r\n    return '0123456789'.indexOf(c) > -1;\r\n};\r\n\r\n// flatten all possible options: global defaults, meta, option obj\r\nfunction getSettings(el, options) {\r\n    options = options || {};\r\n    var $el = $(el);\r\n    var cls = el.className || '';\r\n    // support metadata plugin (v1.0 and v2.0)\r\n    var meta = $.metadata ? $el.metadata() : $.meta ? $el.data() : {};\r\n    var w = meta.width  || parseInt(((cls.match(/w:(\\d+)/)||[])[1]||0));\r\n    var h = meta.height || parseInt(((cls.match(/h:(\\d+)/)||[])[1]||0));\r\n    if (w) meta.width  = w;\r\n    if (h) meta.height = h;\r\n    if (cls) meta.cls = cls;\r\n\r\n    var a = $.fn.media.defaults;\r\n    var b = $.meta && $.fn.media.defaults.preferMeta ? options : meta;\r\n    var c = b == options ? meta : options;\r\n\r\n    var p = { params: { bgColor: options.bgColor || $.fn.media.defaults.bgColor } };\r\n    var opts = $.extend({}, a, b, c);\r\n    $.each(['attrs','params','flashvars','silverlight'], function(i,o) {\r\n        opts[o] = $.extend({}, p[o] || {}, a[o] || {}, b[o] || {}, c[o] || {});\r\n    });\r\n\r\n    if (typeof opts.caption == 'undefined') opts.caption = $el.text();\r\n\r\n    // make sure we have a source!\r\n    opts.src = opts.src || $el.attr('href') || $el.attr('src') || 'unknown';    \r\n    return opts;\r\n};\r\n\r\n//\r\n//  Flash Player\r\n//\r\n\r\n// generate flash using SWFObject if possible\r\n$.fn.media.swf = function(el, opts) {\r\n    if (typeof SWFObject == 'undefined') {\r\n        // roll our own\r\n        if (opts.flashvars) {\r\n            var a = [];\r\n            for (var f in opts.flashvars)\r\n                a.push(f + '=' + opts.flashvars[f]);\r\n            if (!opts.params) opts.params = {};\r\n            opts.params.flashvars = a.join('&');\r\n        }\r\n        return generate(el, opts, 'flash');\r\n    }\r\n\r\n    var id = el.id ? (' id=\"'+el.id+'\"') : '';\r\n    var cls = opts.cls ? (' class=\"' + opts.cls + '\"') : '';\r\n    var $div = $('<div' + id + cls + '>');\r\n    $(el).after($div).remove();\r\n\r\n    var so = new SWFObject(opts.src, 'movie_player_' + counter++, opts.width, opts.height, opts.flashVersion, opts.bgColor);\r\n    for (var p in opts.params)\r\n        if (p != 'bgColor') so.addParam(p, opts.params[p]);\r\n    for (var f in opts.flashvars)\r\n        so.addVariable(f, opts.flashvars[f]);\r\n    so.write($div[0]);\r\n\r\n    if (opts.caption) $('<div>').appendTo($div).html(opts.caption);\r\n    return $div;\r\n};\r\n\r\n// map flv and mp3 files to the swf player by default\r\n$.fn.media.flv = $.fn.media.mp3 = function(el, opts) {\r\n    var src = opts.src;\r\n    var player = /\\.mp3\\b/i.test(src) ? $.fn.media.defaults.mp3Player : $.fn.media.defaults.flvPlayer;    \r\n    \r\n    player = liveurl+'components/com_jshopping/js/jquery/'+player; //change path player\r\n    \r\n    opts.src = player;\r\n    opts.src = opts.src + '?file=' + src;\r\n    opts.flashvars = $.extend({}, { file: src }, opts.flashvars );\r\n    return $.fn.media.swf(el, opts);\r\n};\r\n\r\n//\r\n//  Silverlight\r\n//\r\n$.fn.media.xaml = function(el, opts) {\r\n    if (!window.Sys || !window.Sys.Silverlight) {\r\n        if ($.fn.media.xaml.warning) return;\r\n        $.fn.media.xaml.warning = 1;\r\n        alert('You must include the Silverlight.js script.');\r\n        return;\r\n    }\r\n\r\n    var props = {\r\n        width: opts.width,\r\n        height: opts.height,\r\n        background: opts.bgColor,\r\n        inplaceInstallPrompt: opts.silverlight.inplaceInstallPrompt,\r\n        isWindowless: opts.silverlight.isWindowless,\r\n        framerate: opts.silverlight.framerate,\r\n        version: opts.silverlight.version\r\n    };\r\n    var events = {\r\n        onError: opts.silverlight.onError,\r\n        onLoad: opts.silverlight.onLoad\r\n    };\r\n\r\n    var id1 = el.id ? (' id=\"'+el.id+'\"') : '';\r\n    var id2 = opts.id || 'AG' + counter++;\r\n    // convert element to div\r\n    var cls = opts.cls ? (' class=\"' + opts.cls + '\"') : '';\r\n    var $div = $('<div' + id1 + cls + '>');\r\n    $(el).after($div).remove();\r\n    \r\n    Sys.Silverlight.createObjectEx({\r\n        source: opts.src,\r\n        initParams: opts.silverlight.initParams,\r\n        userContext: opts.silverlight.userContext,\r\n        id: id2,\r\n        parentElement: $div[0],\r\n        properties: props,\r\n        events: events\r\n    });\r\n\r\n    if (opts.caption) $('<div>').appendTo($div).html(opts.caption);\r\n    return $div;\r\n};\r\n\r\n//\r\n// generate object/embed markup\r\n//\r\nfunction generate(el, opts, player) {\r\n    var $el = $(el);\r\n    var o = $.fn.media.defaults.players[player];\r\n    \r\n    if (player == 'iframe') {\r\n        var o = $('<iframe' + ' width=\"' + opts.width + '\" height=\"' + opts.height + '\" >');\r\n        o.attr('src', opts.src);\r\n        o.css('backgroundColor', o.bgColor);\r\n    }\r\n    else if ($.browser.msie) {\r\n        var a = ['<object width=\"' + opts.width + '\" height=\"' + opts.height + '\" '];\r\n        for (var key in opts.attrs)\r\n            a.push(key + '=\"'+opts.attrs[key]+'\" ');\r\n        for (var key in o.oAttrs || {})\r\n            a.push(key + '=\"'+o.oAttrs[key]+'\" ');\r\n        a.push('></ob'+'ject'+'>');\r\n        var p = ['<param name=\"' + (o.oUrl || 'src') +'\" value=\"' + opts.src + '\">'];\r\n        for (var key in opts.params)\r\n            p.push('<param name=\"'+ key +'\" value=\"' + opts.params[key] + '\">');\r\n        var o = document.createElement(a.join(''));\r\n        for (var i=0; i < p.length; i++)\r\n            o.appendChild(document.createElement(p[i]));\r\n    }\r\n    else {\r\n        var a = ['<embed width=\"' + opts.width + '\" height=\"' + opts.height + '\" style=\"display:block\"'];\r\n        if (opts.src) a.push(' src=\"' + opts.src + '\" ');\r\n        for (var key in opts.attrs)\r\n            a.push(key + '=\"'+opts.attrs[key]+'\" ');\r\n        for (var key in o.eAttrs || {})\r\n            a.push(key + '=\"'+o.eAttrs[key]+'\" ');\r\n        for (var key in opts.params)\r\n            a.push(key + '=\"'+opts.params[key]+'\" ');\r\n        a.push('></em'+'bed'+'>');\r\n    }\r\n    // convert element to div\r\n    var id = el.id ? (' id=\"'+el.id+'\"') : '';\r\n    var cls = opts.cls ? (' class=\"' + opts.cls + '\"') : '';\r\n    var $div = $('<div' + id + cls + '>');\r\n    $el.after($div).remove();\r\n    ($.browser.msie || player == 'iframe') ? $div.append(o) : $div.html(a.join(''));\r\n    if (opts.caption) $('<div>').appendTo($div).html(opts.caption);\r\n    return $div;\r\n};\r\n\r\n\r\n})(jQuery);\r\n"],"sourceRoot":"/source/"}