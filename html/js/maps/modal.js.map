{"version":3,"sources":["modal.js"],"names":["SqueezeBox","presets","onOpen","onClose","onUpdate","onResize","onMove","onShow","onHide","size","x","y","sizeLoading","marginInner","marginImage","handler","target","closable","closeBtn","zIndex","overlayOpacity","classWindow","classOverlay","overlayFx","resizeFx","contentFx","parse","parseSecure","shadow","overlay","document","ajaxOptions","initialize","a","this","options","Object","merge","doc","setOptions","build","bound","window","reposition","bind","scroll","checkTarget","close","key","onKey","isOpen","isLoading","Element","id","aria-hidden","styles","tabindex","win","role","Browser","chrome","safari","version","opera","firefox","ie","addClass","ie6","class","inject","b","fireEvent","split","each","c","addEvent","content","href","setProperty","fx","Fx","Tween","property","onStart","Events","prototype","clearChain","duration","link","set","Morph","unit","transition","Transitions","Quint","easeOut","body","adopt","assign","$$","fromElement","open","element","trash","getProperty","JSON","decode","url","get","assignOptions","d","setContent","parsers","call","some","typeOf","stop","Function","from","start","chain","toggleOverlay","toggleListeners","asset","empty","removeEvents","callChain","onError","errorMsg","handlers","className","applyTimer","applyContent","delay","retrieve","clearTimeout","hideContent","toggleLoading","contains","resize","showTimer","getSize","getScroll","self","width","height","left","toInt","top","setStyles","showContent","getWindow","scrollOffset","setStyle","cancel","getScrollSize","getStyles","parseInt","offsetWidth","offsetHeight","$events","extend","append","Hash","Options","Chain","image","test","clone","parentNode","match","ajax","iframe","string","Image","onload","onabort","onerror","e","src","complete","Request","HTML","method","evalScripts","addEvents","onSuccess","exec","response","javascript","onFailure","send","frameBorder","iframeOptions","iframePreload"],"mappings":"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","file":"modal.js","sourcesContent":["/*\n    MIT-style license\n @author    Harald Kirschner <mail [at] digitarald.de>\n @author    Rouven Weßling <me [at] rouvenwessling.de>\n @copyright Author\n*/\nvar SqueezeBox = {\n  presets: {\n    onOpen: function() {},\n    onClose: function() {},\n    onUpdate: function() {},\n    onResize: function() {},\n    onMove: function() {},\n    onShow: function() {},\n    onHide: function() {},\n    size: {\n      x: 600,\n      y: 450\n    },\n    sizeLoading: {\n      x: 200,\n      y: 150\n    },\n    marginInner: {\n      x: 20,\n      y: 20\n    },\n    marginImage: {\n      x: 50,\n      y: 75\n    },\n    handler: !1,\n    target: null,\n    closable: !0,\n    closeBtn: !0,\n    zIndex: 65555,\n    overlayOpacity: 0.7,\n    classWindow: \"\",\n    classOverlay: \"\",\n    overlayFx: {},\n    resizeFx: {},\n    contentFx: {},\n    parse: !1,\n    parseSecure: !1,\n    shadow: !0,\n    overlay: !0,\n    document: null,\n    ajaxOptions: {}\n  },\n  initialize: function(a) {\n    if (this.options) return this;\n    this.presets = Object.merge(this.presets, a);\n    this.doc = this.presets.document || document;\n    this.options = {};\n    this.setOptions(this.presets).build();\n    this.bound = {\n      window: this.reposition.bind(this, [null]),\n      scroll: this.checkTarget.bind(this),\n      close: this.close.bind(this),\n      key: this.onKey.bind(this)\n    };\n    this.isOpen = this.isLoading = !1;\n    return this\n  },\n  build: function() {\n    this.overlay = new Element(\"div\", {\n      id: \"sbox-overlay\",\n      \"aria-hidden\": \"true\",\n      styles: {\n        zIndex: this.options.zIndex\n      },\n      tabindex: -1\n    });\n    this.win = new Element(\"div\", {\n      id: \"sbox-window\",\n      role: \"dialog\",\n      \"aria-hidden\": \"true\",\n      styles: {\n        zIndex: this.options.zIndex + 2\n      }\n    });\n    if (this.options.shadow)\n      if (Browser.chrome || Browser.safari && 3 <= Browser.version || Browser.opera && 10.5 <= Browser.version || Browser.firefox && 3.5 <= Browser.version || Browser.ie && 9 <= Browser.version) this.win.addClass(\"shadow\");\n      else if (!Browser.ie6) {\n      var a = (new Element(\"div\", {\n          \"class\": \"sbox-bg-wrap\"\n        })).inject(this.win),\n        b = function(a) {\n          this.overlay.fireEvent(\"click\", [a])\n        }.bind(this);\n      \"n,ne,e,se,s,sw,w,nw\".split(\",\").each(function(c) {\n        (new Element(\"div\", {\n          \"class\": \"sbox-bg sbox-bg-\" + c\n        })).inject(a).addEvent(\"click\", b)\n      })\n    }\n    this.content = (new Element(\"div\", {\n      id: \"sbox-content\"\n    })).inject(this.win);\n    this.closeBtn = (new Element(\"a\", {\n      id: \"sbox-btn-close\",\n      href: \"#\",\n      role: \"button\"\n    })).inject(this.win);\n    this.closeBtn.setProperty(\"aria-controls\", \"sbox-window\");\n    this.fx = {\n      overlay: (new Fx.Tween(this.overlay, Object.merge({\n        property: \"opacity\",\n        onStart: Events.prototype.clearChain,\n        duration: 250,\n        link: \"cancel\"\n      }, this.options.overlayFx))).set(0),\n      win: new Fx.Morph(this.win, Object.merge({\n        onStart: Events.prototype.clearChain,\n        unit: \"px\",\n        duration: 750,\n        transition: Fx.Transitions.Quint.easeOut,\n        link: \"cancel\",\n        unit: \"px\"\n      }, this.options.resizeFx)),\n      content: (new Fx.Tween(this.content, Object.merge({\n        property: \"opacity\",\n        duration: 250,\n        link: \"cancel\"\n      }, this.options.contentFx))).set(0)\n    };\n    document.id(this.doc.body).adopt(this.overlay, this.win)\n  },\n  assign: function(a, b) {\n    return (document.id(a) || $$(a)).addEvent(\"click\", function() {\n      return !SqueezeBox.fromElement(this, b)\n    })\n  },\n  open: function(a, b) {\n    this.initialize();\n    null != this.element && this.trash();\n    this.element =\n      document.id(a) || !1;\n    this.setOptions(Object.merge(this.presets, b || {}));\n    if (this.element && this.options.parse) {\n      var c = this.element.getProperty(this.options.parse);\n      c && (c = JSON.decode(c, this.options.parseSecure)) && this.setOptions(c)\n    }\n    this.url = (this.element ? this.element.get(\"href\") : a) || this.options.url || \"\";\n    this.assignOptions();\n    var d = d || this.options.handler;\n    return d ? this.setContent(d, this.parsers[d].call(this, !0)) : this.parsers.some(function(a, b) {\n      var c = a.call(this);\n      return c ? (this.setContent(b, c), !0) : !1\n    }, this)\n  },\n  fromElement: function(a, b) {\n    return this.open(a, b)\n  },\n  assignOptions: function() {\n    this.overlay.addClass(this.options.classOverlay);\n    this.win.addClass(this.options.classWindow)\n  },\n  close: function(a) {\n    var b = \"domevent\" == typeOf(a);\n    b && a.stop();\n    if (!this.isOpen || b && !Function.from(this.options.closable).call(this, a)) return this;\n    this.fx.overlay.start(0).chain(this.toggleOverlay.bind(this));\n    this.win.setProperty(\"aria-hidden\", \"true\");\n    this.fireEvent(\"onClose\", [this.content]);\n    this.trash();\n    this.toggleListeners();\n    this.isOpen = !1;\n    return this\n  },\n  trash: function() {\n    this.element = this.asset = null;\n    this.content.empty();\n    this.options = {};\n    this.removeEvents().setOptions(this.presets).callChain()\n  },\n  onError: function() {\n    this.asset = null;\n    this.setContent(\"string\", this.options.errorMsg || \"An error occurred\")\n  },\n  setContent: function(a, b) {\n    if (!this.handlers[a]) return !1;\n    this.content.className = \"sbox-content-\" + a;\n    this.applyTimer = this.applyContent.delay(this.fx.overlay.options.duration, this, this.handlers[a].call(this, b));\n    if (this.overlay.retrieve(\"opacity\")) return this;\n    this.toggleOverlay(!0);\n    this.fx.overlay.start(this.options.overlayOpacity);\n    return this.reposition()\n  },\n  applyContent: function(a, b) {\n    if (this.isOpen || this.applyTimer) this.applyTimer = clearTimeout(this.applyTimer), this.hideContent(), a ? (this.isLoading && this.toggleLoading(!1), this.fireEvent(\"onUpdate\", [this.content], 20)) : this.toggleLoading(!0), a && ([\"string\", \"array\"].contains(typeOf(a)) ? this.content.set(\"html\", a) : a !== this.content && this.content.contains(a) || this.content.adopt(a)), this.callChain(), this.isOpen ?\n      this.resize(b) : (this.toggleListeners(!0), this.resize(b, !0), this.isOpen = !0, this.win.setProperty(\"aria-hidden\", \"false\"), this.fireEvent(\"onOpen\", [this.content]))\n  },\n  resize: function(a, b) {\n    this.showTimer = clearTimeout(this.showTimer || null);\n    var c = this.doc.getSize(),\n      d = this.doc.getScroll();\n    this.size = Object.merge(this.isLoading ? this.options.sizeLoading : this.options.size, a);\n    this.size.x == self.getSize().x && (this.size.y -= 50, this.size.x -= 20);\n    c = {\n      width: this.size.x,\n      height: this.size.y,\n      left: (d.x + (c.x - this.size.x - this.options.marginInner.x) /\n        2).toInt(),\n      top: (d.y + (c.y - this.size.y - this.options.marginInner.y) / 2).toInt()\n    };\n    this.hideContent();\n    b ? (this.win.setStyles(c), this.showTimer = this.showContent.delay(50, this)) : this.fx.win.start(c).chain(this.showContent.bind(this));\n    return this.reposition()\n  },\n  toggleListeners: function(a) {\n    a = a ? \"addEvent\" : \"removeEvent\";\n    this.closeBtn[a](\"click\", this.bound.close);\n    this.overlay[a](\"click\", this.bound.close);\n    this.doc[a](\"keydown\", this.bound.key)[a](\"mousewheel\", this.bound.scroll);\n    this.doc.getWindow()[a](\"resize\", this.bound.window)[a](\"scroll\",\n      this.bound.window)\n  },\n  toggleLoading: function(a) {\n    this.isLoading = a;\n    this.win[a ? \"addClass\" : \"removeClass\"](\"sbox-loading\");\n    a && (this.win.setProperty(\"aria-busy\", a), this.fireEvent(\"onLoading\", [this.win]))\n  },\n  toggleOverlay: function(a) {\n    if (this.options.overlay) {\n      var b = this.doc.getSize().x;\n      this.overlay.set(\"aria-hidden\", a ? \"false\" : \"true\");\n      this.doc.body[a ? \"addClass\" : \"removeClass\"](\"body-overlayed\");\n      a ? this.scrollOffset = this.doc.getWindow().getSize().x - b : this.doc.body.setStyle(\"margin-right\", \"\")\n    }\n  },\n  showContent: function() {\n    this.content.get(\"opacity\") &&\n      this.fireEvent(\"onShow\", [this.win]);\n    this.fx.content.start(1)\n  },\n  hideContent: function() {\n    this.content.get(\"opacity\") || this.fireEvent(\"onHide\", [this.win]);\n    this.fx.content.cancel().set(0)\n  },\n  onKey: function(a) {\n    switch (a.key) {\n      case \"esc\":\n        this.close(a);\n      case \"up\":\n      case \"down\":\n        return !1\n    }\n  },\n  checkTarget: function(a) {\n    return a.target !== this.content && this.content.contains(a.target)\n  },\n  reposition: function() {\n    var a = this.doc.getSize(),\n      b = this.doc.getScroll(),\n      c = this.doc.getScrollSize(),\n      d = this.overlay.getStyles(\"height\"),\n      d = parseInt(d.height);\n    c.y > d && a.y >= d && (this.overlay.setStyles({\n      width: c.x + \"px\",\n      height: c.y + \"px\"\n    }), this.win.setStyles({\n      left: (b.x + (a.x - this.win.offsetWidth) / 2 - this.scrollOffset).toInt() + \"px\",\n      top: (b.y + (a.y - this.win.offsetHeight) / 2).toInt() + \"px\"\n    }));\n    return this.fireEvent(\"onMove\", [this.overlay, this.win])\n  },\n  removeEvents: function(a) {\n    if (!this.$events) return this;\n    a ? this.$events[a] && (this.$events[a] = null) : this.$events = null;\n    return this\n  },\n  extend: function(a) {\n    return Object.append(this, a)\n  },\n  handlers: new Hash,\n  parsers: new Hash\n};\nSqueezeBox.extend(new Events(function() {})).extend(new Options(function() {})).extend(new Chain(function() {}));\nSqueezeBox.parsers.extend({\n  image: function(a) {\n    return a || /\\.(?:jpg|png|gif)$/i.test(this.url) ? this.url : !1\n  },\n  clone: function(a) {\n    if (document.id(this.options.target)) return document.id(this.options.target);\n    if (this.element && !this.element.parentNode) return this.element;\n    var b = this.url.match(/#([\\w-]+)$/);\n    return b ? document.id(b[1]) : a ? this.element : !1\n  },\n  ajax: function(a) {\n    return a || this.url && !/^(?:javascript|#)/i.test(this.url) ? this.url : !1\n  },\n  iframe: function(a) {\n    return a || this.url ? this.url : !1\n  },\n  string: function() {\n    return !0\n  }\n});\nSqueezeBox.handlers.extend({\n  image: function(a) {\n    var b, c = new Image;\n    this.asset = null;\n    c.onload = c.onabort = c.onerror = function() {\n      c.onload = c.onabort = c.onerror = null;\n      if (c.width) {\n        var a = this.doc.getSize();\n        a.x -= this.options.marginImage.x;\n        a.y -= this.options.marginImage.y;\n        b = {\n          x: c.width,\n          y: c.height\n        };\n        for (var e = 2; e--;)\n          if (b.x > a.x) b.y *= a.x / b.x, b.x = a.x;\n          else if (b.y > a.y) b.x *= a.y / b.y, b.y = a.y;\n        b.x = b.x.toInt();\n        b.y = b.y.toInt();\n        this.asset = document.id(c);\n        c = null;\n        this.asset.width = b.x;\n        this.asset.height = b.y;\n        this.applyContent(this.asset,\n          b)\n      } else this.onError.delay(10, this)\n    }.bind(this);\n    c.src = a;\n    if (c && c.onload && c.complete) c.onload();\n    return this.asset ? [this.asset, b] : null\n  },\n  clone: function(a) {\n    return a ? a.clone() : this.onError()\n  },\n  adopt: function(a) {\n    return a ? a : this.onError()\n  },\n  ajax: function(a) {\n    var b = this.options.ajaxOptions || {};\n    this.asset = (new Request.HTML(Object.merge({\n      method: \"get\",\n      evalScripts: !1\n    }, this.options.ajaxOptions))).addEvents({\n      onSuccess: function(a) {\n        this.applyContent(a);\n        null !== b.evalScripts && !b.evalScripts && Browser.exec(this.asset.response.javascript);\n        this.fireEvent(\"onAjax\", [a, this.asset]);\n        this.asset = null\n      }.bind(this),\n      onFailure: this.onError.bind(this)\n    });\n    this.asset.send.delay(10, this.asset, [{\n      url: a\n    }])\n  },\n  iframe: function(a) {\n    this.asset = new Element(\"iframe\", Object.merge({\n      src: a,\n      frameBorder: 0,\n      width: this.options.size.x,\n      height: this.options.size.y\n    }, this.options.iframeOptions));\n    return this.options.iframePreload ? (this.asset.addEvent(\"load\", function() {\n      this.applyContent(this.asset.setStyle(\"display\", \"\"))\n    }.bind(this)), this.asset.setStyle(\"display\", \"none\").inject(this.content), !1) : this.asset\n  },\n  string: function(a) {\n    return a\n  }\n});\nSqueezeBox.handlers.url = SqueezeBox.handlers.ajax;\nSqueezeBox.parsers.url = SqueezeBox.parsers.ajax;\nSqueezeBox.parsers.adopt = SqueezeBox.parsers.clone;\n"],"sourceRoot":"/source/"}