{"version":3,"sources":["modal.js"],"names":["SqueezeBox","presets","onOpen","onClose","onUpdate","onResize","onMove","onShow","onHide","size","x","y","sizeLoading","marginInner","marginImage","handler","target","closable","closeBtn","zIndex","overlayOpacity","classWindow","classOverlay","overlayFx","resizeFx","contentFx","parse","parseSecure","shadow","overlay","document","ajaxOptions","initialize","a","this","options","Object","merge","doc","setOptions","build","bound","window","reposition","bind","scroll","checkTarget","close","key","onKey","isOpen","isLoading","Element","id","aria-hidden","styles","tabindex","win","role","Browser","chrome","safari","version","opera","firefox","ie","addClass","ie6","class","inject","b","fireEvent","split","each","c","addEvent","content","href","setProperty","fx","Fx","Tween","property","onStart","Events","prototype","clearChain","duration","link","set","Morph","unit","transition","Transitions","Quint","easeOut","body","adopt","assign","$$","fromElement","open","element","trash","getProperty","JSON","decode","url","get","assignOptions","d","setContent","parsers","call","some","typeOf","stop","Function","from","start","chain","toggleOverlay","toggleListeners","asset","empty","removeEvents","callChain","onError","errorMsg","handlers","className","applyTimer","applyContent","delay","retrieve","clearTimeout","hideContent","toggleLoading","contains","resize","showTimer","getSize","getScroll","self","width","height","left","toInt","top","setStyles","showContent","getWindow","scrollOffset","setStyle","cancel","getScrollSize","getStyles","parseInt","offsetWidth","offsetHeight","$events","extend","append","Hash","Options","Chain","image","test","clone","parentNode","match","ajax","iframe","string","Image","onload","onabort","onerror","e","src","complete","Request","HTML","method","evalScripts","addEvents","onSuccess","exec","response","javascript","onFailure","send","frameBorder","iframeOptions","iframePreload"],"mappings":"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","file":"modal.js","sourcesContent":["/*\n\t\tMIT-style license\n @author\t\tHarald Kirschner <mail [at] digitarald.de>\n @author\t\tRouven Weßling <me [at] rouvenwessling.de>\n @copyright\tAuthor\n*/\nvar SqueezeBox={presets:{onOpen:function(){},onClose:function(){},onUpdate:function(){},onResize:function(){},onMove:function(){},onShow:function(){},onHide:function(){},size:{x:600,y:450},sizeLoading:{x:200,y:150},marginInner:{x:20,y:20},marginImage:{x:50,y:75},handler:!1,target:null,closable:!0,closeBtn:!0,zIndex:65555,overlayOpacity:0.7,classWindow:\"\",classOverlay:\"\",overlayFx:{},resizeFx:{},contentFx:{},parse:!1,parseSecure:!1,shadow:!0,overlay:!0,document:null,ajaxOptions:{}},initialize:function(a){if(this.options)return this;\nthis.presets=Object.merge(this.presets,a);this.doc=this.presets.document||document;this.options={};this.setOptions(this.presets).build();this.bound={window:this.reposition.bind(this,[null]),scroll:this.checkTarget.bind(this),close:this.close.bind(this),key:this.onKey.bind(this)};this.isOpen=this.isLoading=!1;return this},build:function(){this.overlay=new Element(\"div\",{id:\"sbox-overlay\",\"aria-hidden\":\"true\",styles:{zIndex:this.options.zIndex},tabindex:-1});this.win=new Element(\"div\",{id:\"sbox-window\",\nrole:\"dialog\",\"aria-hidden\":\"true\",styles:{zIndex:this.options.zIndex+2}});if(this.options.shadow)if(Browser.chrome||Browser.safari&&3<=Browser.version||Browser.opera&&10.5<=Browser.version||Browser.firefox&&3.5<=Browser.version||Browser.ie&&9<=Browser.version)this.win.addClass(\"shadow\");else if(!Browser.ie6){var a=(new Element(\"div\",{\"class\":\"sbox-bg-wrap\"})).inject(this.win),b=function(a){this.overlay.fireEvent(\"click\",[a])}.bind(this);\"n,ne,e,se,s,sw,w,nw\".split(\",\").each(function(c){(new Element(\"div\",\n{\"class\":\"sbox-bg sbox-bg-\"+c})).inject(a).addEvent(\"click\",b)})}this.content=(new Element(\"div\",{id:\"sbox-content\"})).inject(this.win);this.closeBtn=(new Element(\"a\",{id:\"sbox-btn-close\",href:\"#\",role:\"button\"})).inject(this.win);this.closeBtn.setProperty(\"aria-controls\",\"sbox-window\");this.fx={overlay:(new Fx.Tween(this.overlay,Object.merge({property:\"opacity\",onStart:Events.prototype.clearChain,duration:250,link:\"cancel\"},this.options.overlayFx))).set(0),win:new Fx.Morph(this.win,Object.merge({onStart:Events.prototype.clearChain,\nunit:\"px\",duration:750,transition:Fx.Transitions.Quint.easeOut,link:\"cancel\",unit:\"px\"},this.options.resizeFx)),content:(new Fx.Tween(this.content,Object.merge({property:\"opacity\",duration:250,link:\"cancel\"},this.options.contentFx))).set(0)};document.id(this.doc.body).adopt(this.overlay,this.win)},assign:function(a,b){return(document.id(a)||$$(a)).addEvent(\"click\",function(){return!SqueezeBox.fromElement(this,b)})},open:function(a,b){this.initialize();null!=this.element&&this.trash();this.element=\ndocument.id(a)||!1;this.setOptions(Object.merge(this.presets,b||{}));if(this.element&&this.options.parse){var c=this.element.getProperty(this.options.parse);c&&(c=JSON.decode(c,this.options.parseSecure))&&this.setOptions(c)}this.url=(this.element?this.element.get(\"href\"):a)||this.options.url||\"\";this.assignOptions();var d=d||this.options.handler;return d?this.setContent(d,this.parsers[d].call(this,!0)):this.parsers.some(function(a,b){var c=a.call(this);return c?(this.setContent(b,c),!0):!1},this)},\nfromElement:function(a,b){return this.open(a,b)},assignOptions:function(){this.overlay.addClass(this.options.classOverlay);this.win.addClass(this.options.classWindow)},close:function(a){var b=\"domevent\"==typeOf(a);b&&a.stop();if(!this.isOpen||b&&!Function.from(this.options.closable).call(this,a))return this;this.fx.overlay.start(0).chain(this.toggleOverlay.bind(this));this.win.setProperty(\"aria-hidden\",\"true\");this.fireEvent(\"onClose\",[this.content]);this.trash();this.toggleListeners();this.isOpen=\n!1;return this},trash:function(){this.element=this.asset=null;this.content.empty();this.options={};this.removeEvents().setOptions(this.presets).callChain()},onError:function(){this.asset=null;this.setContent(\"string\",this.options.errorMsg||\"An error occurred\")},setContent:function(a,b){if(!this.handlers[a])return!1;this.content.className=\"sbox-content-\"+a;this.applyTimer=this.applyContent.delay(this.fx.overlay.options.duration,this,this.handlers[a].call(this,b));if(this.overlay.retrieve(\"opacity\"))return this;\nthis.toggleOverlay(!0);this.fx.overlay.start(this.options.overlayOpacity);return this.reposition()},applyContent:function(a,b){if(this.isOpen||this.applyTimer)this.applyTimer=clearTimeout(this.applyTimer),this.hideContent(),a?(this.isLoading&&this.toggleLoading(!1),this.fireEvent(\"onUpdate\",[this.content],20)):this.toggleLoading(!0),a&&([\"string\",\"array\"].contains(typeOf(a))?this.content.set(\"html\",a):a!==this.content&&this.content.contains(a)||this.content.adopt(a)),this.callChain(),this.isOpen?\nthis.resize(b):(this.toggleListeners(!0),this.resize(b,!0),this.isOpen=!0,this.win.setProperty(\"aria-hidden\",\"false\"),this.fireEvent(\"onOpen\",[this.content]))},resize:function(a,b){this.showTimer=clearTimeout(this.showTimer||null);var c=this.doc.getSize(),d=this.doc.getScroll();this.size=Object.merge(this.isLoading?this.options.sizeLoading:this.options.size,a);this.size.x==self.getSize().x&&(this.size.y-=50,this.size.x-=20);c={width:this.size.x,height:this.size.y,left:(d.x+(c.x-this.size.x-this.options.marginInner.x)/\n2).toInt(),top:(d.y+(c.y-this.size.y-this.options.marginInner.y)/2).toInt()};this.hideContent();b?(this.win.setStyles(c),this.showTimer=this.showContent.delay(50,this)):this.fx.win.start(c).chain(this.showContent.bind(this));return this.reposition()},toggleListeners:function(a){a=a?\"addEvent\":\"removeEvent\";this.closeBtn[a](\"click\",this.bound.close);this.overlay[a](\"click\",this.bound.close);this.doc[a](\"keydown\",this.bound.key)[a](\"mousewheel\",this.bound.scroll);this.doc.getWindow()[a](\"resize\",this.bound.window)[a](\"scroll\",\nthis.bound.window)},toggleLoading:function(a){this.isLoading=a;this.win[a?\"addClass\":\"removeClass\"](\"sbox-loading\");a&&(this.win.setProperty(\"aria-busy\",a),this.fireEvent(\"onLoading\",[this.win]))},toggleOverlay:function(a){if(this.options.overlay){var b=this.doc.getSize().x;this.overlay.set(\"aria-hidden\",a?\"false\":\"true\");this.doc.body[a?\"addClass\":\"removeClass\"](\"body-overlayed\");a?this.scrollOffset=this.doc.getWindow().getSize().x-b:this.doc.body.setStyle(\"margin-right\",\"\")}},showContent:function(){this.content.get(\"opacity\")&&\nthis.fireEvent(\"onShow\",[this.win]);this.fx.content.start(1)},hideContent:function(){this.content.get(\"opacity\")||this.fireEvent(\"onHide\",[this.win]);this.fx.content.cancel().set(0)},onKey:function(a){switch(a.key){case \"esc\":this.close(a);case \"up\":case \"down\":return!1}},checkTarget:function(a){return a.target!==this.content&&this.content.contains(a.target)},reposition:function(){var a=this.doc.getSize(),b=this.doc.getScroll(),c=this.doc.getScrollSize(),d=this.overlay.getStyles(\"height\"),d=parseInt(d.height);\nc.y>d&&a.y>=d&&(this.overlay.setStyles({width:c.x+\"px\",height:c.y+\"px\"}),this.win.setStyles({left:(b.x+(a.x-this.win.offsetWidth)/2-this.scrollOffset).toInt()+\"px\",top:(b.y+(a.y-this.win.offsetHeight)/2).toInt()+\"px\"}));return this.fireEvent(\"onMove\",[this.overlay,this.win])},removeEvents:function(a){if(!this.$events)return this;a?this.$events[a]&&(this.$events[a]=null):this.$events=null;return this},extend:function(a){return Object.append(this,a)},handlers:new Hash,parsers:new Hash};SqueezeBox.extend(new Events(function(){})).extend(new Options(function(){})).extend(new Chain(function(){}));\nSqueezeBox.parsers.extend({image:function(a){return a||/\\.(?:jpg|png|gif)$/i.test(this.url)?this.url:!1},clone:function(a){if(document.id(this.options.target))return document.id(this.options.target);if(this.element&&!this.element.parentNode)return this.element;var b=this.url.match(/#([\\w-]+)$/);return b?document.id(b[1]):a?this.element:!1},ajax:function(a){return a||this.url&&!/^(?:javascript|#)/i.test(this.url)?this.url:!1},iframe:function(a){return a||this.url?this.url:!1},string:function(){return!0}});\nSqueezeBox.handlers.extend({image:function(a){var b,c=new Image;this.asset=null;c.onload=c.onabort=c.onerror=function(){c.onload=c.onabort=c.onerror=null;if(c.width){var a=this.doc.getSize();a.x-=this.options.marginImage.x;a.y-=this.options.marginImage.y;b={x:c.width,y:c.height};for(var e=2;e--;)if(b.x>a.x)b.y*=a.x/b.x,b.x=a.x;else if(b.y>a.y)b.x*=a.y/b.y,b.y=a.y;b.x=b.x.toInt();b.y=b.y.toInt();this.asset=document.id(c);c=null;this.asset.width=b.x;this.asset.height=b.y;this.applyContent(this.asset,\nb)}else this.onError.delay(10,this)}.bind(this);c.src=a;if(c&&c.onload&&c.complete)c.onload();return this.asset?[this.asset,b]:null},clone:function(a){return a?a.clone():this.onError()},adopt:function(a){return a?a:this.onError()},ajax:function(a){var b=this.options.ajaxOptions||{};this.asset=(new Request.HTML(Object.merge({method:\"get\",evalScripts:!1},this.options.ajaxOptions))).addEvents({onSuccess:function(a){this.applyContent(a);null!==b.evalScripts&&!b.evalScripts&&Browser.exec(this.asset.response.javascript);\nthis.fireEvent(\"onAjax\",[a,this.asset]);this.asset=null}.bind(this),onFailure:this.onError.bind(this)});this.asset.send.delay(10,this.asset,[{url:a}])},iframe:function(a){this.asset=new Element(\"iframe\",Object.merge({src:a,frameBorder:0,width:this.options.size.x,height:this.options.size.y},this.options.iframeOptions));return this.options.iframePreload?(this.asset.addEvent(\"load\",function(){this.applyContent(this.asset.setStyle(\"display\",\"\"))}.bind(this)),this.asset.setStyle(\"display\",\"none\").inject(this.content),\n!1):this.asset},string:function(a){return a}});SqueezeBox.handlers.url=SqueezeBox.handlers.ajax;SqueezeBox.parsers.url=SqueezeBox.parsers.ajax;SqueezeBox.parsers.adopt=SqueezeBox.parsers.clone;"],"sourceRoot":"/source/"}