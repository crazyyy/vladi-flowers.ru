function getPageScroll(){var e;return self.pageYOffset?e=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),arrayPageScroll=new Array("",e),arrayPageScroll}function getPageSize(){var e,t;window.innerHeight&&window.scrollMaxY?(e=document.body.scrollWidth,t=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(e=document.body.scrollWidth,t=document.body.scrollHeight):(e=document.body.offsetWidth,t=document.body.offsetHeight);var n,o;return self.innerHeight?(n=self.innerWidth,o=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(n=document.documentElement.clientWidth,o=document.documentElement.clientHeight):document.body&&(n=document.body.clientWidth,o=document.body.clientHeight),o>t?pageHeight=o:pageHeight=t,n>e?pageWidth=n:pageWidth=e,arrayPageSize=new Array(pageWidth,pageHeight,n,o),arrayPageSize}function pause(e){for(var t=new Date,n=t.getTime()+e;;)if(t=new Date,t.getTime()>n)return}function getKey(e){null==e?keycode=event.keyCode:keycode=e.which,key=String.fromCharCode(keycode).toLowerCase(),"x"==key&&hideLightbox()}function listenKey(){document.onkeypress=getKey}function showLightbox(e){var t=document.getElementById("overlay"),n=document.getElementById("lightbox"),o=document.getElementById("lightboxCaption"),i=document.getElementById("lightboxImage"),l=document.getElementById("loadingImage"),d=document.getElementById("lightboxDetails"),a=getPageSize(),r=getPageScroll();l&&(l.style.top=r[1]+(a[3]-35-l.height)/2+"px",l.style.left=(a[0]-20-l.width)/2+"px",l.style.display="block"),t.style.height=a[1]+"px",t.style.display="block",imgPreload=new Image,imgPreload.onload=function(){i.src=e.href;var c=r[1]+(a[3]-35-imgPreload.height)/2,g=(a[0]-20-imgPreload.width)/2;return n.style.top=0>c?"0px":c+"px",n.style.left=0>g?"0px":g+"px",d.style.width=imgPreload.width+"px",e.getAttribute("title")?(o.style.display="block",o.innerHTML=e.getAttribute("title")):o.style.display="none",-1!=navigator.appVersion.indexOf("MSIE")&&pause(250),l&&(l.style.display="none"),n.style.display="block",a=getPageSize(),t.style.height=a[1]+"px",listenKey(),!1},imgPreload.src=e.href}function hideLightbox(){objOverlay=document.getElementById("overlay"),objLightbox=document.getElementById("lightbox"),objOverlay.style.display="none",objLightbox.style.display="none",document.onkeypress=""}function initLightbox(){if(document.getElementsByTagName){for(var e=document.getElementsByTagName("a"),t=0;t<e.length;t++){var n=e[t];n.getAttribute("href")&&"lightbox"==n.getAttribute("rel")&&(n.onclick=function(){return showLightbox(this),!1})}var o=document.getElementsByTagName("body").item(0),i=document.createElement("div");i.setAttribute("id","overlay"),i.onclick=function(){return hideLightbox(),!1},i.style.display="none",i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.zIndex="90",i.style.width="100%",o.insertBefore(i,o.firstChild);var l=(getPageSize(),getPageScroll(),new Image);l.onload=function(){var e=document.createElement("a");e.setAttribute("href","#"),e.onclick=function(){return hideLightbox(),!1},i.appendChild(e);var t=document.createElement("img");return t.src=loadingImage,t.setAttribute("id","loadingImage"),t.style.position="absolute",t.style.zIndex="150",e.appendChild(t),l.onload=function(){},!1},l.src=loadingImage;var d=document.createElement("div");d.setAttribute("id","lightbox"),d.style.display="none",d.style.position="absolute",d.style.zIndex="100",o.insertBefore(d,i.nextSibling);var a=document.createElement("a");a.setAttribute("href","#"),a.setAttribute("title","Нажмите для закрытия"),a.onclick=function(){return hideLightbox(),!1},d.appendChild(a);var r=new Image;r.onload=function(){var e=document.createElement("img");return e.src=closeButton,e.setAttribute("id","closeButton"),e.style.position="absolute",e.style.zIndex="200",a.appendChild(e),!1},r.src=closeButton;var c=document.createElement("img");c.setAttribute("id","lightboxImage"),a.appendChild(c);var g=document.createElement("div");g.setAttribute("id","lightboxDetails"),d.appendChild(g);var s=document.createElement("div");s.setAttribute("id","lightboxCaption"),s.style.display="none",g.appendChild(s);var m=document.createElement("div");m.setAttribute("id","keyboardMsg"),m.innerHTML="Нажмите <kbd>X</kbd> для закрытия.",g.appendChild(m)}}function addLoadEvent(e){var t=window.onload;"function"!=typeof window.onload?window.onload=e:window.onload=function(){t(),e()}}var loadingImage="templates/lightbox/loading.gif",closeButton="templates/lightbox/close.gif";addLoadEvent(initLightbox);
//# sourceMappingURL=maps/lightbox.js.map
